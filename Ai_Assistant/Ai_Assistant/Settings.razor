
@page "/settings"
@using Ai_Assistant
@inject ISettingsService SettingsService

<h1>Settings</h1>

@if (settings == null)
{
    <p>Loading...</p>
}
else
{
    <div>
        <label>Location (City):</label>
        <input @bind="settings.City" />
    </div>
    <div>
        <label>Location (Country):</label>
        <input @bind="settings.Country" />
    </div>
    <div>
        <label>Microsoft To-Do API Token:</label>
        <input @bind="settings.ApiToken" />
    </div>
    <div>
        <label>Phone IP Address:</label>
        <input @bind="settings.PhoneIp" />
    </div>
    <div>
        <label>Local LLM URL:</label>
        <input @bind="settings.LocalLLMUrl" />
    </div>
    <button @onclick="SaveSettings">Save</button>
}

@code {
    private Settings settings;

    protected override async Task OnInitializedAsync()
    {
        settings = await SettingsService.LoadSettingsAsync();
    }

    async Task SaveSettings()
    {
        await SettingsService.SaveSettingsAsync(settings);
    }
}
